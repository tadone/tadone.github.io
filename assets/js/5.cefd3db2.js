(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{187:function(s,t,a){"use strict";a.r(t);var e=a(0),n=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"azure-cli"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#azure-cli","aria-hidden":"true"}},[s._v("#")]),s._v(" Azure CLI")]),s._v(" "),a("p",[s._v("::: info\nInstall with Homebrew: "),a("code",[s._v("brew install azure-cli")]),s._v("\nFind commands with "),a("code",[s._v("az find -q rbac")]),s._v("\n:::")]),s._v(" "),a("h2",{attrs:{id:"login"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#login","aria-hidden":"true"}},[s._v("#")]),s._v(" Login")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("az login "),a("span",{attrs:{class:"token comment"}},[s._v("# Use browser to enter code and associate the credentials")]),s._v("\naz login -u "),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("username"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" -p "),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("password"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token comment"}},[s._v("# Will not work with 2-factor authentication")]),s._v("\n")])])]),a("h2",{attrs:{id:"set-acount"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set-acount","aria-hidden":"true"}},[s._v("#")]),s._v(" Set Acount")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("az account list --output table "),a("span",{attrs:{class:"token comment"}},[s._v("# List account names & subscriptions")]),s._v("\naz account "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v(" --subscription "),a("span",{attrs:{class:"token string"}},[s._v('"MSI-SWE-CIE-DEV"')]),s._v(" "),a("span",{attrs:{class:"token comment"}},[s._v("# Change subscription")]),s._v("\naz account show --query "),a("span",{attrs:{class:"token string"}},[s._v("'tenantId'")]),s._v(" -o tsv "),a("span",{attrs:{class:"token comment"}},[s._v("# Show tenantId")]),s._v("\n\n"),a("span",{attrs:{class:"token comment"}},[s._v("# Create a VM in specific subscription & resource group")]),s._v("\naz vm create --subscription "),a("span",{attrs:{class:"token string"}},[s._v('"My Demos"')]),s._v(" --resource-group MyGroup --name NewVM --image Ubuntu\n")])])]),a("h2",{attrs:{id:"set-cloud"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set-cloud","aria-hidden":"true"}},[s._v("#")]),s._v(" Set Cloud")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("az cloud list --output table "),a("span",{attrs:{class:"token comment"}},[s._v("# Show current active cloud (default: AzureCloud)")]),s._v("\naz cloud "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v(" --name AzureUSGovernment "),a("span",{attrs:{class:"token comment"}},[s._v("# Switch to US Gov Cloud")]),s._v("\n")])])]),a("h2",{attrs:{id:"locations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#locations","aria-hidden":"true"}},[s._v("#")]),s._v(" Locations")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("az account list-locations "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" jq "),a("span",{attrs:{class:"token string"}},[s._v("'.[].name'")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("sort")]),s._v("  "),a("span",{attrs:{class:"token comment"}},[s._v("# list locations")]),s._v("\n")])])]),a("h2",{attrs:{id:"output-format"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-format","aria-hidden":"true"}},[s._v("#")]),s._v(" Output Format")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("â€“output")]),s._v(" "),a("th",[s._v("Description")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("json")]),s._v(" "),a("td",[s._v("JSON string. This setting is the default.")])]),s._v(" "),a("tr",[a("td",[s._v("jsonc")]),s._v(" "),a("td",[s._v("Colorized JSON.")])]),s._v(" "),a("tr",[a("td",[s._v("table")]),s._v(" "),a("td",[s._v("ASCII table with keys as column headings.")])]),s._v(" "),a("tr",[a("td",[s._v("tsv")]),s._v(" "),a("td",[s._v("Tab-separated values, with no keys")])])])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[s._v("# Example")]),s._v("\naz vm list --out table\naz vm list --out tsv "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("grep")]),s._v(" RGD "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("cut")]),s._v(" -f8\n")])])]),a("h2",{attrs:{id:"query"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#query","aria-hidden":"true"}},[s._v("#")]),s._v(" Query")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[s._v("# Query the array (multiple output) where 2nd field is a field in JSON")]),s._v("\naz cloud list --query "),a("span",{attrs:{class:"token string"}},[s._v("'[].{cloud_name:name, active:isActive}'")]),s._v("\n")])])]),a("h2",{attrs:{id:"arm-deployment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#arm-deployment","aria-hidden":"true"}},[s._v("#")]),s._v(" ARM Deployment")]),s._v(" "),a("p",[s._v("Use "),a("code",[s._v("az group")]),s._v(" for deploying arm templates")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[s._v("# Create a deployment from a remote template file, using parameters from a local JSON file.")]),s._v("\naz group deployment create -g "),a("span",{attrs:{class:"token string"}},[s._v('"MyResourceGroup"')]),s._v(" --template-uri "),a("span",{attrs:{class:"token string"}},[s._v('"https://myresource/azuredeploy.json"')]),s._v(" --parameters @myparameters.json\n"),a("span",{attrs:{class:"token comment"}},[s._v("# Create a deployment from a local template file, using parameters from a JSON string.")]),s._v("\naz group deployment create -g "),a("span",{attrs:{class:"token string"}},[s._v('"MyResourceGroup"')]),s._v(" --template-file azuredeploy.json --parameters "),a("span",{attrs:{class:"token string"}},[s._v('\'{\n                                "location": {\n                                    "value": "westus"\n                                }\n                            }\'')]),s._v("\n")])])]),a("h2",{attrs:{id:"resource-group"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#resource-group","aria-hidden":"true"}},[s._v("#")]),s._v(" Resource Group")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("az group create -l "),a("span",{attrs:{class:"token string"}},[s._v('"westus"')]),s._v(" -n "),a("span",{attrs:{class:"token string"}},[s._v('"MyResourceGroup"')]),s._v("    "),a("span",{attrs:{class:"token comment"}},[s._v("# Create new resource group")]),s._v("\naz group delete -n "),a("span",{attrs:{class:"token string"}},[s._v('"MyResourceGroup"')]),s._v("                "),a("span",{attrs:{class:"token comment"}},[s._v("# Delete resource group")]),s._v("\naz group delete --name                              "),a("span",{attrs:{class:"token comment"}},[s._v("# RG Name")]),s._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--no-wait"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                         "),a("span",{attrs:{class:"token comment"}},[s._v("# Don't wait for command to finish")]),s._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--yes"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                             "),a("span",{attrs:{class:"token comment"}},[s._v("# Assume yes")]),s._v("\naz resource list --resource-group "),a("span",{attrs:{class:"token string"}},[s._v('"MyResourceGroup"')]),s._v(" "),a("span",{attrs:{class:"token comment"}},[s._v("# List resources in the resource group")]),s._v("\naz group show --name "),a("span",{attrs:{class:"token string"}},[s._v('"MyResourceGroup"')]),s._v("              "),a("span",{attrs:{class:"token comment"}},[s._v("# Get info about resource group")]),s._v("\naz group "),a("span",{attrs:{class:"token function"}},[s._v("export")]),s._v(" --name "),a("span",{attrs:{class:"token string"}},[s._v('"MyResourceGroup"')]),s._v("            "),a("span",{attrs:{class:"token comment"}},[s._v("# Export Resource Group to ARM Template")]),s._v("\naz group update --name "),a("span",{attrs:{class:"token string"}},[s._v('"MyResourceGroup"')]),s._v("\n    --set tags.Env"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("Stage tags.Dept"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("IT               "),a("span",{attrs:{class:"token comment"}},[s._v("# Tag existing resource group")]),s._v("\n")])])]),a("h2",{attrs:{id:"users-roles"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#users-roles","aria-hidden":"true"}},[s._v("#")]),s._v(" Users & Roles")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("az ad user list -o table                            "),a("span",{attrs:{class:"token comment"}},[s._v("# List users in Azure AD")]),s._v("\n\naz role assignment list -o table                    "),a("span",{attrs:{class:"token comment"}},[s._v("# List role assignments")]),s._v("\naz role assignment list "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'name\\|principalName'")]),a("span",{attrs:{class:"token comment"}},[s._v("# List role assignment and filter for name or principalName")]),s._v("\n\n"),a("span",{attrs:{class:"token comment"}},[s._v("# FIND ALL ASSINGLED ROLES FOR USER")]),s._v("\naz role assignment list --all --assignee cal085@email.com\n\n"),a("span",{attrs:{class:"token comment"}},[s._v("# Find if CoreID is assinged to resourc group")]),s._v("\naz role assignment list --resource-group radio2-dev --output table "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("grep")]),s._v(" CAL085\n"),a("span",{attrs:{class:"token comment"}},[s._v("# List all users assigned to resource group")]),s._v("\naz role assignment list --resource-group radio2-dev --output table\n"),a("span",{attrs:{class:"token comment"}},[s._v("# Grant access to resource group")]),s._v("\naz role assignment create --role "),a("span",{attrs:{class:"token string"}},[s._v('"Contributor"')]),s._v(" --assignee "),a("span",{attrs:{class:"token string"}},[s._v('"CAL085@email.com"')]),s._v(" --resource-group "),a("span",{attrs:{class:"token string"}},[s._v('"radio2-qa"')]),s._v("\n"),a("span",{attrs:{class:"token comment"}},[s._v("# Remove access")]),s._v("\naz role assignment delete --assignee "),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("assignee"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" --role "),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("role"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" --resource-group "),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("resource_group"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("h2",{attrs:{id:"key-vault"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#key-vault","aria-hidden":"true"}},[s._v("#")]),s._v(" Key Vault")]),s._v(" "),a("p",[s._v("Requires access policy for data-plane access")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[s._v("# Set secret")]),s._v("\naz keyvault secret "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v(" --vault-name "),a("span",{attrs:{class:"token string"}},[s._v("'virtualpartnerdev720f1'")]),s._v(" --name "),a("span",{attrs:{class:"token string"}},[s._v("'SQLPassword'")]),s._v(" --value "),a("span",{attrs:{class:"token string"}},[s._v("'Pa$"),a("span",{attrs:{class:"token variable"}},[s._v("$w0rd")]),s._v("'")]),s._v("\n\n"),a("span",{attrs:{class:"token comment"}},[s._v("# List secrets")]),s._v("\naz keyvault secret list --vault-name "),a("span",{attrs:{class:"token string"}},[s._v("'virtualpartnerdev720f1'")]),s._v("\n")])])])])}],!1,null,null,null);n.options.__file="azure.md";t.default=n.exports}}]);