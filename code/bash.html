<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Bash Scripting | Tadone Vuepress</title>
    <meta name="description" content="Tadone Vuepress">
    <link rel="icon" href="/logo.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.e6882789.css" as="style"><link rel="preload" href="/assets/js/app.ed8a5df2.js" as="script"><link rel="preload" href="/assets/js/6.aa581904.js" as="script"><link rel="prefetch" href="/assets/js/10.57ac8f37.js"><link rel="prefetch" href="/assets/js/11.c27ad3cd.js"><link rel="prefetch" href="/assets/js/12.e3f125da.js"><link rel="prefetch" href="/assets/js/13.c1ba01d9.js"><link rel="prefetch" href="/assets/js/14.5cf3fbf8.js"><link rel="prefetch" href="/assets/js/15.d67da69d.js"><link rel="prefetch" href="/assets/js/16.799f5f32.js"><link rel="prefetch" href="/assets/js/17.1a7c4f5b.js"><link rel="prefetch" href="/assets/js/18.55aa3423.js"><link rel="prefetch" href="/assets/js/19.82753390.js"><link rel="prefetch" href="/assets/js/2.fcb46994.js"><link rel="prefetch" href="/assets/js/20.457d13ca.js"><link rel="prefetch" href="/assets/js/21.2342a659.js"><link rel="prefetch" href="/assets/js/22.412ca278.js"><link rel="prefetch" href="/assets/js/23.f6d2ee29.js"><link rel="prefetch" href="/assets/js/24.bc5c4f85.js"><link rel="prefetch" href="/assets/js/25.b5eef347.js"><link rel="prefetch" href="/assets/js/26.54065786.js"><link rel="prefetch" href="/assets/js/27.144dacc7.js"><link rel="prefetch" href="/assets/js/28.79a28376.js"><link rel="prefetch" href="/assets/js/29.0bc7fa25.js"><link rel="prefetch" href="/assets/js/3.eeb73190.js"><link rel="prefetch" href="/assets/js/30.849a3886.js"><link rel="prefetch" href="/assets/js/31.3e51818c.js"><link rel="prefetch" href="/assets/js/32.9e7b84f4.js"><link rel="prefetch" href="/assets/js/33.f00f2460.js"><link rel="prefetch" href="/assets/js/34.b1717a37.js"><link rel="prefetch" href="/assets/js/35.2ba5d738.js"><link rel="prefetch" href="/assets/js/36.f84d49ab.js"><link rel="prefetch" href="/assets/js/37.2b834aa2.js"><link rel="prefetch" href="/assets/js/38.28513fa2.js"><link rel="prefetch" href="/assets/js/39.fdbc69db.js"><link rel="prefetch" href="/assets/js/4.8df8b0d2.js"><link rel="prefetch" href="/assets/js/40.889340c7.js"><link rel="prefetch" href="/assets/js/5.0c376756.js"><link rel="prefetch" href="/assets/js/7.c094cb2f.js"><link rel="prefetch" href="/assets/js/8.3d7e1a52.js"><link rel="prefetch" href="/assets/js/9.2397ffad.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e6882789.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Tadone Vuepress</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="https://github.com/tadone" target="_blank" rel="noopener noreferrer" class="nav-link external">
  My GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="https://github.com/tadone" target="_blank" rel="noopener noreferrer" class="nav-link external">
  My GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Cloud</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/cloud/aws.html" class="sidebar-link">AWS</a></li><li><a href="/cloud/azure.html" class="sidebar-link">Azure</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Code</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/code/git.html" class="sidebar-link">Git</a></li><li><a href="/code/bash.html" class="active sidebar-link">Bash Scripting</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/code/bash.html#helpful-tips" class="sidebar-link">Helpful Tips</a></li><li class="sidebar-sub-header"><a href="/code/bash.html#print-output" class="sidebar-link">Print Output</a></li><li class="sidebar-sub-header"><a href="/code/bash.html#builtin-variables" class="sidebar-link">Builtin variables</a></li><li class="sidebar-sub-header"><a href="/code/bash.html#variable-expansion" class="sidebar-link">Variable Expansion</a></li><li class="sidebar-sub-header"><a href="/code/bash.html#redirect-output" class="sidebar-link">Redirect Output</a></li><li class="sidebar-sub-header"><a href="/code/bash.html#script-options" class="sidebar-link">Script Options</a></li><li class="sidebar-sub-header"><a href="/code/bash.html#read-input" class="sidebar-link">Read Input</a></li><li class="sidebar-sub-header"><a href="/code/bash.html#if-statement" class="sidebar-link">If Statement</a></li><li class="sidebar-sub-header"><a href="/code/bash.html#common-tests" class="sidebar-link">Common Tests</a></li><li class="sidebar-sub-header"><a href="/code/bash.html#loops" class="sidebar-link">Loops</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/code/bash.html#while-loop" class="sidebar-link">While Loop</a></li><li class="sidebar-sub-header"><a href="/code/bash.html#until-loop" class="sidebar-link">Until Loop</a></li><li class="sidebar-sub-header"><a href="/code/bash.html#for-loop" class="sidebar-link">For Loop</a></li><li class="sidebar-sub-header"><a href="/code/bash.html#for-loop-in-range" class="sidebar-link">For Loop in Range</a></li></ul></li><li class="sidebar-sub-header"><a href="/code/bash.html#functions" class="sidebar-link">Functions</a></li><li class="sidebar-sub-header"><a href="/code/bash.html#arrays" class="sidebar-link">Arrays</a></li><li class="sidebar-sub-header"><a href="/code/bash.html#heredoc" class="sidebar-link">Heredoc</a></li><li class="sidebar-sub-header"><a href="/code/bash.html#subshell" class="sidebar-link">Subshell</a></li><li class="sidebar-sub-header"><a href="/code/bash.html#debugging" class="sidebar-link">Debugging</a></li></ul></li><li><a href="/code/python.html" class="sidebar-link">Python</a></li><li><a href="/code/python/list.html" class="sidebar-link">Python Lists</a></li><li><a href="/code/python/class.html" class="sidebar-link">Python Classes</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>DevOps</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/devops/cicd.html" class="sidebar-link">CI/CD</a></li><li><a href="/devops/docker.html" class="sidebar-link">Docker</a></li><li><a href="/devops/databases.html" class="sidebar-link">Database Technologies</a></li><li><a href="/devops/sql.html" class="sidebar-link">SQL Basics</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Kubernetes</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/kubernetes/overview.html" class="sidebar-link">Overview</a></li><li><a href="/kubernetes/kubectl.html" class="sidebar-link">KubeCtl</a></li><li><a href="/kubernetes/cheatsheet.html" class="sidebar-link">Cheatsheet</a></li><li><a href="/kubernetes/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/kubernetes/objects_configs.html" class="sidebar-link">Objects: Data-In</a></li><li><a href="/kubernetes/objects_volumes.html" class="sidebar-link">Objects: Volumes</a></li><li><a href="/kubernetes/objects_deployments.html" class="sidebar-link">Objects: Deployments</a></li><li><a href="/kubernetes/objects_services_ingress.html" class="sidebar-link">Objects: Services &amp; Ingress</a></li><li><a href="/kubernetes/cluster.html" class="sidebar-link">My Clusters</a></li><li><a href="/kubernetes/troubleshooting.html" class="sidebar-link">Troubleshooting</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Linux</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/linux/bash_shell.html" class="sidebar-link">Bash Shell</a></li><li><a href="/linux/linux_basics.html" class="sidebar-link">Fundementals</a></li><li><a href="/linux/linux_metrics.html" class="sidebar-link">Metrics</a></li><li><a href="/linux/linux_tools.html" class="sidebar-link">GNU Tools</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Other</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/other/markdown.html" class="sidebar-link">Markdown Cheatsheet</a></li><li><a href="/other/yaml_json.html" class="sidebar-link">YAML &amp; JSON</a></li><li><a href="/other/setup.html" class="sidebar-link">System Setup</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="bash-scripting"><a href="#bash-scripting" aria-hidden="true" class="header-anchor">#</a> Bash Scripting</h1> <h2 id="helpful-tips"><a href="#helpful-tips" aria-hidden="true" class="header-anchor">#</a> Helpful Tips</h2> <p>Edit with SED if the string exist:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">grep</span> -q <span class="token string">'^option'</span> <span class="token function">file</span> <span class="token operator">&amp;&amp;</span> \                              <span class="token comment"># returns true/false if the string 'option' is there</span>
<span class="token function">sed</span> -i <span class="token string">&quot;s/option = .*/option = my-setting/g&quot;</span> <span class="token function">file</span>        <span class="token comment"># replaces lines that start with 'option' string</span>
</code></pre></div><p>Append multiple lines to a file:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># possibility 1:</span>
<span class="token keyword">echo</span> <span class="token string">&quot;line 1&quot;</span> <span class="token operator">&gt;&gt;</span> greetings.txt
<span class="token keyword">echo</span> <span class="token string">&quot;line 2&quot;</span> <span class="token operator">&gt;&gt;</span> greetings.txt
<span class="token comment"># possibility 2:</span>
<span class="token keyword">echo</span> -e <span class="token string">&quot;line 1\nline 2&quot;</span> <span class="token operator">&gt;&gt;</span> greetings.txt
<span class="token comment"># possibility 3:</span>
<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span>EOT <span class="token operator">&gt;&gt;</span> greetings.txt
line 1
line 2
EOT
</code></pre></div><p>Install package if not installed already</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token operator">!</span> dpkg -s <span class="token operator">&lt;</span>apt_package<span class="token operator">&gt;</span> <span class="token operator">&gt;</span> /dev/null<span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y <span class="token operator">&lt;</span>apt_package<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token keyword">fi</span>
</code></pre></div><h2 id="print-output"><a href="#print-output" aria-hidden="true" class="header-anchor">#</a> Print Output</h2> <p>The shell output can be colorized via ANSI escape codes
Requires Bash v4 and use of <code>printf</code> or <code>echo -e</code></p> <table><thead><tr><th>echo</th> <th>printf</th> <th>Explained</th></tr></thead> <tbody><tr><td>echo</td> <td>printf '\n'</td> <td>Prints empty new line</td></tr> <tr><td>echo -n &quot;Test&quot;</td> <td>printf &quot;Test&quot;</td> <td>Print Test without a new line</td></tr> <tr><td>echo -e &quot;\nTest&quot;</td> <td>printf '\n%s' &quot;Test&quot;</td> <td>Print Test on a new line</td></tr> <tr><td>echo -e &quot;$VAR&quot;</td> <td>printf '\n%s' &quot;$VAR&quot;</td> <td>Print $VAR as string</td></tr> <tr><td>echo -e &quot;\n$VAR&quot;</td> <td>printf '\n%s\n' &quot;$VAR&quot;</td> <td>Print $VAR as string followed by new line</td></tr> <tr><td>echo -e &quot;&quot;Test&quot;&quot;</td> <td>printf '%s\n' &quot;&quot;Test&quot;&quot;</td> <td>Print &quot;Test&quot; as string followed by new line</td></tr> <tr><td>echo -e &quot;${cyan}$*${clear}&quot;</td> <td>printf &quot;$cyan%s$clear\n&quot; &quot;$*&quot;</td> <td>Print any argument in color then resets it back</td></tr></tbody></table> <p><strong>ANSI Color Codes</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># COLORS</span>
BLACK<span class="token operator">=</span><span class="token string">&quot;\u001b[30m&quot;</span>
RED<span class="token operator">=</span><span class="token string">&quot;\u001b[31m&quot;</span>
GREEN<span class="token operator">=</span><span class="token string">&quot;\u001b[32m&quot;</span>
YELLOW<span class="token operator">=</span><span class="token string">&quot;\u001b[33m&quot;</span>
BLUE<span class="token operator">=</span><span class="token string">&quot;\u001b[34m&quot;</span>
MAGENTA<span class="token operator">=</span><span class="token string">&quot;\u001b[35m&quot;</span>
CYAN<span class="token operator">=</span><span class="token string">&quot;\u001b[36m&quot;</span>
WHITE<span class="token operator">=</span><span class="token string">&quot;\u001b[37m&quot;</span>
<span class="token comment"># RESET</span>
RESET <span class="token operator">=</span> <span class="token string">&quot;\u001b[0m&quot;</span>                 <span class="token comment"># Reset the colors</span>
<span class="token comment"># FOR printf</span>
clear<span class="token operator">=</span><span class="token string">&quot;\e[0m&quot;</span>
<span class="token comment"># DECORATORS</span>
BOLD<span class="token operator">=</span><span class="token string">&quot;\u001b[1m&quot;</span>
UNDERLINE<span class="token operator">=</span><span class="token string">&quot;\u001b[4m&quot;</span>
REVERSED<span class="token operator">=</span><span class="token string">&quot;\u001b[7m&quot;</span>

<span class="token keyword">echo</span> -e <span class="token string">&quot;\u001b[31mHello&quot;</span>           <span class="token comment"># Prints Hello in red</span>
<span class="token keyword">echo</span> -e <span class="token string">&quot;<span class="token variable">${BLACK}</span>Hello<span class="token variable">${RESET}</span>&quot;</span>     <span class="token comment"># Prints Hello in black and resets back</span>
</code></pre></div><h2 id="builtin-variables"><a href="#builtin-variables" aria-hidden="true" class="header-anchor">#</a> Builtin variables</h2> <table><thead><tr><th>Variable</th> <th>What it means</th></tr></thead> <tbody><tr><td><code>$0</code></td> <td>The name of the Bash script</td></tr> <tr><td><code>$1-$9</code></td> <td>1-9 Positional arguments to the script</td></tr> <tr><td><code>$#</code></td> <td>How many arguments were passed to the Bash script</td></tr> <tr><td><code>$@</code></td> <td>All the arguments supplied to the Bash script</td></tr> <tr><td><code>$?</code></td> <td>The <strong>exit status</strong> of the most recently run process</td></tr> <tr><td><code>$$</code></td> <td>The process ID of the current script</td></tr> <tr><td><code>$USER</code></td> <td>The username of the user running the script</td></tr> <tr><td><code>$HOSTNAME</code></td> <td>The hostname of the machine the script is running on</td></tr> <tr><td><code>$SECONDS</code></td> <td>The number of seconds since the script was started</td></tr> <tr><td><code>$RANDOM</code></td> <td>Returns a different random number each time is it referred to</td></tr> <tr><td><code>$LINENO</code></td> <td>Returns the current line number in the Bash script</td></tr></tbody></table> <h2 id="variable-expansion"><a href="#variable-expansion" aria-hidden="true" class="header-anchor">#</a> Variable Expansion</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">${myvar:-some_other}</span> <span class="token comment"># if myvar is set use it, otherwise set it to some_other</span>
<span class="token variable">${myvar:?my_custom_error}</span> <span class="token comment"># if myvar is set use it, otherwise throw error: my_custom_error</span>
</code></pre></div><h2 id="redirect-output"><a href="#redirect-output" aria-hidden="true" class="header-anchor">#</a> Redirect Output</h2> <p>Redirect STDOUT(1) and/or STDERR(2)</p> <table><thead><tr><th style="text-align:right">Command</th> <th style="text-align:left">What it does</th></tr></thead> <tbody><tr><td style="text-align:right"><code>command 2&gt; output.txt</code></td> <td style="text-align:left">Outputs <strong>ERROR</strong> only to a file</td></tr> <tr><td style="text-align:right"><code>command &amp;&gt; output.txt</code></td> <td style="text-align:left">Outputs both <strong>OUTPUT</strong> &amp; <strong>ERROR</strong> to a file</td></tr> <tr><td style="text-align:right"><code>command &amp;&gt; /dev/null</code></td> <td style="text-align:left">Discards both <strong>OUTPUT</strong> &amp; <strong>ERROR</strong></td></tr> <tr><td style="text-align:right"><code>command &gt; output.txt 2&gt;&amp;1</code></td> <td style="text-align:left">Posix way of redirecting stderr to stdout</td></tr></tbody></table> <p><strong>Recap</strong></p> <ul><li>There are two places programs send output to: Standard Output (<strong>stdout</strong>) and Standard Error (<strong>stderr</strong>)</li> <li>You can redirect these outputs to a different place (like a file)</li> <li>File descriptors are used to identify stdout (1) and stderr (2)</li> <li><code>command &gt; output</code> is just a shortcut for <code>command 1&gt; output</code></li> <li>Using <strong>2&gt;&amp;1</strong> will redirect stderr to whatever value is set to stdout (and <strong>1&gt;&amp;2</strong> will do the opposite).</li></ul> <h2 id="script-options"><a href="#script-options" aria-hidden="true" class="header-anchor">#</a> Script Options</h2> <p>Use <code>set -</code> to enable option and <code>set +</code> to disable</p> <p><code>set -e</code> - Causes the shell to exit if any subcommand or pipeline returns a non-zero status.
<code>set -x</code> - Enables a mode of the shell where all executed commands are printed to the terminal
<code>set +x</code> - Disables debug mode</p> <h2 id="read-input"><a href="#read-input" aria-hidden="true" class="header-anchor">#</a> Read Input</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># Ask the user for login details</span>
<span class="token function">read</span> -p <span class="token string">'Username: '</span> uservar            <span class="token comment"># -p prompt</span>
<span class="token function">read</span> -sp <span class="token string">'Password: '</span> passvar           <span class="token comment"># -s silent</span>
<span class="token keyword">echo</span>
<span class="token keyword">echo</span> Thankyou <span class="token variable">$uservar</span> we now have your login details
</code></pre></div><h2 id="if-statement"><a href="#if-statement" aria-hidden="true" class="header-anchor">#</a> If Statement</h2> <p>The square brackets <strong>[ ]</strong> in the if statement above are actually a reference to the command <strong>test</strong>.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">&lt;</span>some test<span class="token operator">&gt;</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
    <span class="token operator">&lt;</span>commands<span class="token operator">&gt;</span>
<span class="token keyword">fi</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">&lt;</span>some test<span class="token operator">&gt;</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
    <span class="token operator">&lt;</span>commands<span class="token operator">&gt;</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token operator">&lt;</span>some test<span class="token operator">&gt;</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
    <span class="token operator">&lt;</span>different commands<span class="token operator">&gt;</span>
<span class="token keyword">else</span>
    <span class="token operator">&lt;</span>other commands<span class="token operator">&gt;</span>
<span class="token keyword">fi</span>
</code></pre></div><p><code>&amp;&amp;</code> - Perform the <strong>AND</strong> operation.</p> <p><code>||</code> - Perform the <strong>OR</strong> operation.</p> <table><thead><tr><th style="text-align:right">Operator</th> <th style="text-align:left">Description</th></tr></thead> <tbody><tr><td style="text-align:right">! EXPRESSION</td> <td style="text-align:left">The EXPRESSION is false.</td></tr> <tr><td style="text-align:right">-n STRING</td> <td style="text-align:left">The length of STRING is greater than zero.</td></tr> <tr><td style="text-align:right">-z STRING</td> <td style="text-align:left">The lengh of STRING is zero (ie it is empty).</td></tr> <tr><td style="text-align:right">STRING1 = STRING2</td> <td style="text-align:left">STRING1 is equal to STRING2</td></tr> <tr><td style="text-align:right">STRING1 != STRING2</td> <td style="text-align:left">STRING1 is not equal to STRING2</td></tr> <tr><td style="text-align:right">INTEGER1 -eq INTEGER2</td> <td style="text-align:left">INTEGER1 is numerically equal to INTEGER2</td></tr> <tr><td style="text-align:right">INTEGER1 -gt INTEGER2</td> <td style="text-align:left">INTEGER1 is numerically greater than INTEGER2</td></tr> <tr><td style="text-align:right">INTEGER1 -lt INTEGER2</td> <td style="text-align:left">INTEGER1 is numerically less than INTEGER2</td></tr> <tr><td style="text-align:right">-d FILE</td> <td style="text-align:left">FILE exists and is a directory.</td></tr> <tr><td style="text-align:right">-e FILE</td> <td style="text-align:left">FILE exists.</td></tr> <tr><td style="text-align:right">-r FILE</td> <td style="text-align:left">FILE exists and the read permission is granted.</td></tr> <tr><td style="text-align:right">-s FILE</td> <td style="text-align:left">FILE exists and it's size is greater than zero (ie. it is not empty).</td></tr> <tr><td style="text-align:right">-w FILE</td> <td style="text-align:left">FILE exists and the write permission is granted.</td></tr> <tr><td style="text-align:right">-x FILE</td> <td style="text-align:left">FILE exists and the execute permission is granted.</td></tr></tbody></table> <h2 id="common-tests"><a href="#common-tests" aria-hidden="true" class="header-anchor">#</a> Common Tests</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token function">command</span> <span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token keyword">echo</span> <span class="token string">&quot;Command succeeded&quot;</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token keyword">echo</span> <span class="token string">&quot;Command failed&quot;</span><span class="token punctuation">;</span> <span class="token keyword">fi</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> -z <span class="token string">&quot;<span class="token variable">$VAR1</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment"># This will return true if a variable is unset or set to the empty string</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> -n <span class="token string">&quot;<span class="token variable">$VAR1</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment"># the inverse of -z</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;<span class="token variable">$DIR</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment"># Test if directory $DIR (does not !) exist(s)</span>
<span class="token comment"># check if a variable is defined/non-NULL</span>
<span class="token function">test</span> <span class="token string">&quot;<span class="token variable">$MYVAR</span>&quot;</span>
<span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$MYVAR</span>&quot;</span> <span class="token punctuation">]</span>

<span class="token comment"># check if a directory exists, if not, create it</span>
<span class="token function">test</span> <span class="token operator">!</span> -d /home/user/foo <span class="token operator">&amp;&amp;</span> <span class="token function">mkdir</span> /home/user/foo
<span class="token punctuation">[</span> <span class="token operator">!</span> -d /home/user/foo <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token function">mkdir</span> /home/user/foo
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d /home/user/foo <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token function">mkdir</span> /home/user/foo<span class="token punctuation">;</span> <span class="token keyword">fi</span>

<span class="token comment"># Listing directories</span>
<span class="token keyword">for</span> fn <span class="token keyword">in</span> *<span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token punctuation">[</span> -d <span class="token string">&quot;<span class="token variable">$fn</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">echo</span> <span class="token string">&quot;<span class="token variable">$fn</span>&quot;</span>
<span class="token keyword">done</span>

<span class="token comment"># Check if a specific user exists in /etc/passwd</span>
<span class="token keyword">if</span> <span class="token function">grep</span> ^myuser: /etc/passwd <span class="token operator">&gt;</span>/dev/null 2<span class="token operator">&gt;</span><span class="token operator">&amp;</span>1<span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token keyword">echo</span> <span class="token string">&quot;Yes, it seems I'm real&quot;</span>
<span class="token keyword">else</span>
  <span class="token keyword">echo</span> <span class="token string">&quot;Uh - am I a ghost?&quot;</span>
<span class="token keyword">fi</span>
<span class="token comment"># Mount with check</span>
<span class="token keyword">if</span> <span class="token operator">!</span> <span class="token function">mount</span> /mnt/backup <span class="token operator">&gt;</span>/dev/null 2<span class="token operator">&gt;</span><span class="token operator">&amp;</span>1<span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token keyword">echo</span> <span class="token string">&quot;FATAL: backup mount failed&quot;</span> <span class="token operator">&gt;</span><span class="token operator">&amp;</span>2
  <span class="token keyword">exit</span> 1
<span class="token keyword">fi</span>
<span class="token comment"># Multiple commands as condition. It's perfectly valid to do:</span>
<span class="token keyword">if</span> <span class="token keyword">echo</span> <span class="token string">&quot;I'm testing!&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">[</span> -e /some/file <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token punctuation">..</span>.
<span class="token keyword">fi</span>
</code></pre></div><h2 id="loops"><a href="#loops" aria-hidden="true" class="header-anchor">#</a> Loops</h2> <p><code>break</code> - Exit the currently running loop.</p> <p><code>continue</code> - Stop this iteration of the loop and begin the next iteration.</p> <h3 id="while-loop"><a href="#while-loop" aria-hidden="true" class="header-anchor">#</a> While Loop</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>
<span class="token comment"># Basic while loop</span>
counter<span class="token operator">=</span>1
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$counter</span> -le 10 <span class="token punctuation">]</span>       <span class="token comment"># While counter is less then 10</span>
<span class="token keyword">do</span>
    <span class="token keyword">echo</span> <span class="token variable">$counter</span>
    <span class="token variable"><span class="token punctuation">((</span>counter<span class="token operator">++</span><span class="token punctuation">))</span></span>               <span class="token comment"># Increment counter with each loop</span>
<span class="token keyword">done</span>

<span class="token keyword">while</span> <span class="token function">read</span> url
<span class="token keyword">do</span>
    youtube-dl <span class="token punctuation">..</span>. <span class="token string">&quot;<span class="token variable">$url</span>&quot;</span>
<span class="token keyword">done</span>
</code></pre></div><p><strong>Single Line While Loop</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">while</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token function">date</span><span class="token punctuation">;</span> <span class="token function">sleep</span> 1<span class="token punctuation">;</span> <span class="token keyword">done</span>
</code></pre></div><h3 id="until-loop"><a href="#until-loop" aria-hidden="true" class="header-anchor">#</a> Until Loop</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Basic until loop</span>
counter<span class="token operator">=</span>1
<span class="token keyword">until</span> <span class="token punctuation">[</span> <span class="token variable">$counter</span> -gt 10 <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token keyword">echo</span> <span class="token variable">$counter</span>
    <span class="token variable"><span class="token punctuation">((</span>counter<span class="token operator">++</span><span class="token punctuation">))</span></span>
<span class="token keyword">done</span>
</code></pre></div><h3 id="for-loop"><a href="#for-loop" aria-hidden="true" class="header-anchor">#</a> For Loop</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Basic for loop</span>
names<span class="token operator">=</span><span class="token string">'Stan Kyle Cartman'</span>
<span class="token keyword">for</span> name <span class="token keyword">in</span> <span class="token variable">$names</span>
<span class="token keyword">do</span>
    <span class="token keyword">echo</span> <span class="token variable">$name</span>
<span class="token keyword">done</span>
</code></pre></div><h3 id="for-loop-in-range"><a href="#for-loop-in-range" aria-hidden="true" class="header-anchor">#</a> For Loop in Range</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">for</span> value <span class="token keyword">in</span> <span class="token punctuation">{</span>1<span class="token punctuation">..</span>5<span class="token punctuation">}</span>
<span class="token keyword">do</span>
    <span class="token keyword">echo</span> <span class="token variable">$value</span>
<span class="token keyword">done</span>
</code></pre></div><hr> <h2 id="functions"><a href="#functions" aria-hidden="true" class="header-anchor">#</a> Functions</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>function_name <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">&lt;</span>commands<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Pass Argument to Function</p> <div class="language-bash extra-class"><pre class="language-bash"><code>print_something <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> Hello <span class="token variable">$1</span>
<span class="token punctuation">}</span>
print_something Mars                <span class="token comment"># OUTPUT: Hello Mars</span>
print_something Jupiter             <span class="token comment"># OUTPUT: Hello Jupiter</span>
</code></pre></div><h2 id="arrays"><a href="#arrays" aria-hidden="true" class="header-anchor">#</a> Arrays</h2> <p><strong>Creating Arrays</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>names<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">&quot;Bob&quot;</span> <span class="token string">&quot;Peter&quot;</span> <span class="token string">&quot;<span class="token variable">$USER</span>&quot;</span> <span class="token string">&quot;Big Bad John&quot;</span><span class="token punctuation">)</span>
photos<span class="token operator">=</span><span class="token punctuation">(</span>~/<span class="token string">&quot;My Photos&quot;</span>/*.jpg<span class="token punctuation">)</span>

files<span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span><span class="token variable">)</span></span>    <span class="token comment"># BAD, BAD, BAD!</span>
files<span class="token operator">=</span><span class="token punctuation">(</span>*<span class="token punctuation">)</span>      <span class="token comment"># Good!</span>
</code></pre></div><p><strong>Using Arrays</strong>
The syntax <code>&quot;${myfiles[@]}&quot;</code> is extremely important. It works just like <code>&quot;$@&quot;</code> does for the positional parameters: it expands to a list of words, with each array element as one word, no matter what it contains. Even if there are spaces, tabs, newlines, quotation marks, or any other kind of characters in one of the array elements, it'll still be passed along as one word to whichever command we're running.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># FOR LOOP</span>
<span class="token keyword">for</span> <span class="token function">file</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">${myfiles[@]}</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
    <span class="token function">cp</span> <span class="token string">&quot;<span class="token variable">$file</span>&quot;</span> /backups/
<span class="token keyword">done</span>
<span class="token comment"># SINGLE LINE</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">${arr[@]}</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token keyword">echo</span> <span class="token variable">$i</span><span class="token punctuation">;</span> <span class="token keyword">done</span>
<span class="token comment"># STRAIGHT COPY</span>
myfiles<span class="token operator">=</span><span class="token punctuation">(</span>db.sql home.tbz2 etc.tbz2<span class="token punctuation">)</span>
<span class="token function">cp</span> <span class="token string">&quot;<span class="token variable">${myfiles[@]}</span>&quot;</span> /backups/

<span class="token comment"># POS IN ARRAY</span>
names<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">&quot;Bob&quot;</span> <span class="token string">&quot;Peter&quot;</span> <span class="token string">&quot;<span class="token variable">$USER</span>&quot;</span> <span class="token string">&quot;Big Bad John&quot;</span><span class="token punctuation">)</span>        <span class="token comment"># Create an array</span>
<span class="token keyword">declare</span> -p names                                    <span class="token comment"># Print contents of a variable with the type</span>

<span class="token keyword">echo</span> <span class="token string">&quot;The first name is: <span class="token variable">${names[0]}</span>&quot;</span>               <span class="token comment"># Access 1st item in the array</span>
<span class="token keyword">echo</span> <span class="token string">&quot;The second name is: <span class="token variable">${names[1]}</span>&quot;</span>              <span class="token comment"># Access 2nd item in the array</span>
</code></pre></div><h2 id="heredoc"><a href="#heredoc" aria-hidden="true" class="header-anchor">#</a> Heredoc</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token operator">&gt;</span> hello.py <span class="token operator">&lt;&lt;</span> <span class="token string">EOF
#!/usr/bin/env python
from __future__ import print_function
import sys
print(&quot;#stdout&quot;, file=sys.stdout)
print(&quot;#stderr&quot;, file=sys.stderr)
for line in sys.stdin:
    print(line, file=sys.stdout)
EOF</span>

<span class="token comment"># PREVENT VARIABLE EXPANSION</span>
<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'EOF'</span> <span class="token operator">&gt;</span> /tmp/yourfilehere
The variable <span class="token variable">$FOO</span> will not be interpreted.
EOF
</code></pre></div><h2 id="subshell"><a href="#subshell" aria-hidden="true" class="header-anchor">#</a> Subshell</h2> <p>A subshell is a child process that inherits more than a normal external command does. It can see all the variables of your script, not just the ones that have been exported to the environment.
<strong>To force a command to run in subshell use parentheses</strong> <code>()</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code>foo<span class="token operator">=</span>old
<span class="token punctuation">(</span>foo<span class="token operator">=</span>bar<span class="token punctuation">)</span>
<span class="token keyword">echo</span> <span class="token string">&quot;<span class="token variable">$foo</span>&quot;</span>                <span class="token comment"># Output: old</span>

<span class="token punctuation">(</span>cd /foo <span class="token operator">||</span> <span class="token keyword">exit</span> 1<span class="token punctuation">;</span> <span class="token function">tar</span> <span class="token punctuation">..</span>.<span class="token punctuation">)</span>
</code></pre></div><h2 id="debugging"><a href="#debugging" aria-hidden="true" class="header-anchor">#</a> Debugging</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">bash</span> -x ./mybrokenscript

<span class="token comment">#!/bin/bash -x</span>
<span class="token punctuation">[</span><span class="token punctuation">..</span> script <span class="token punctuation">..</span><span class="token punctuation">]</span>

<span class="token comment">#!/usr/bin/env bash</span>
<span class="token keyword">set</span> -x
</code></pre></div><p>Add set -x somewhere in your code to turn on this mode for only a specific block of your code:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#!/usr/bin/env bash</span>
<span class="token punctuation">[</span><span class="token punctuation">..</span>irrelevant code<span class="token punctuation">..</span><span class="token punctuation">]</span>
<span class="token keyword">set</span> -x
<span class="token punctuation">[</span><span class="token punctuation">..</span>relevant code<span class="token punctuation">..</span><span class="token punctuation">]</span>
<span class="token keyword">set</span> +x
<span class="token punctuation">[</span><span class="token punctuation">..</span>irrelevant code<span class="token punctuation">..</span><span class="token punctuation">]</span>
</code></pre></div></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">3/1/2019, 11:25:54 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/code/git.html" class="prev">
          Git
        </a></span> <span class="next"><a href="/code/python.html">
          Python
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.ed8a5df2.js" defer></script><script src="/assets/js/6.aa581904.js" defer></script>
  </body>
</html>
